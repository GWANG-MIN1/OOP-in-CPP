# Chapter 12: λ™μ  λ‹¤ν•μ„±μ λ™μ‘ μ›λ¦¬ (ν•µμ‹¬ μ”μ•½)

μ΄ μ¥μ—μ„λ” C++κ°€ `virtual` ν•¨μλ¥Ό ν†µν•΄ μ–΄λ–»κ² λ°νƒ€μ„ λ‹¤ν•μ„±μ„ κµ¬ν„ν•λ”μ§€, κ·Έ λ‚΄λ¶€ λ™μ‘ μ›λ¦¬λ¥Ό μ•μ•„λ΄…λ‹λ‹¤.

---

## 1. λ°”μΈλ”©: νΈμ¶κ³Ό κµ¬ν„μ μ—°κ²°

-   **μ •μ  λ°”μΈλ”© (Static Binding):** **μ»΄νμΌ μ‹**μ— νΈμ¶ν•  ν•¨μκ°€ κ²°μ •λ©λ‹λ‹¤.
    -   `virtual`μ΄ μ•„λ‹ μΌλ° ν•¨μμ— ν•΄λ‹Ήν•©λ‹λ‹¤.
    -   ν¬μΈν„°μ **μ„ μ–Έλ νƒ€μ…**μ„ λ”°λ¦…λ‹λ‹¤. (μ: `Shape*` ν¬μΈν„°λ” `Shape`μ ν•¨μλ¥Ό νΈμ¶)

-   **λ™μ  λ°”μΈλ”© (Dynamic Binding):** **μ‹¤ν–‰ μ‹**μ— νΈμ¶ν•  ν•¨μκ°€ κ²°μ •λ©λ‹λ‹¤.
    -   `virtual` ν•¨μμ— ν•΄λ‹Ήν•©λ‹λ‹¤.
    -   ν¬μΈν„°κ°€ **μ‹¤μ λ΅ κ°€λ¦¬ν‚¤λ” κ°μ²΄**μ νƒ€μ…μ„ λ”°λ¦…λ‹λ‹¤. (μ: `Shape*` ν¬μΈν„°κ°€ `Circle` κ°μ²΄λ¥Ό κ°€λ¦¬ν‚¤λ©΄ `Circle`μ ν•¨μλ¥Ό νΈμ¶)

## 2. λ‹¤ν•μ„±μ„ μ„ν• ν•µμ‹¬ λ„κµ¬

-   **`virtual` ν‚¤μ›λ“:** λ¶€λ¨ ν΄λμ¤ ν•¨μμ— λ¶™μ—¬ "μ΄ ν•¨μλ” λ™μ  λ°”μΈλ”©μ„ μ‚¬μ©ν•κ² λ‹¤"κ³  μ„ μ–Έν•λ” **ν•µμ‹¬ μ¤μ„μΉ**μ…λ‹λ‹¤.

-   **`override` ν‚¤μ›λ“ (C++11):** μμ‹ ν΄λμ¤ ν•¨μμ— λ¶™μ—¬ "λ‚λ” λ¶€λ¨μ κ°€μƒ ν•¨μλ¥Ό μ¬μ •μ(μ¤λ²„λΌμ΄λ”©)ν•λ” κ²ƒμ΄ λ§λ‹¤"κ³  λ…μ‹ν•©λ‹λ‹¤. μλ„μ™€ λ‹¤λ¥Ό κ²½μ° μ»΄νμΌλ¬κ°€ μ—λ¬λ¥Ό λ°μƒμ‹μΌμ£Όλ” **μ•μ „μ¥μΉ**μ…λ‹λ‹¤.

-   **κ°€μƒ μ†λ©Έμ (`virtual ~Base()`):** λ¶€λ¨ ν΄λμ¤μ ν¬μΈν„°λ΅ μμ‹ κ°μ²΄λ¥Ό `delete` ν•  λ•, μμ‹μ μ†λ©ΈμκΉμ§€ λ¨λ‘ νΈμ¶λλ„λ΅ λ³΄μ¥ν•©λ‹λ‹¤. λ©”λ¨λ¦¬ λ„μλ¥Ό λ§‰κΈ° μ„ν•΄ μƒμ†μ„ μ‚¬μ©ν•λ‹¤λ©΄ **λ°λ“μ‹ ν•„μ”**ν•©λ‹λ‹¤.

## 3. μ–΄λ–»κ² λ™μ‘ν•λ”κ°€? (vtableκ³Ό vptr)

λ™μ  λ°”μΈλ”©μ€ λ§λ²•μ΄ μ•„λ‹λΌ, μ •ν•΄μ§„ λ©”μ»¤λ‹μ¦μ„ λ”°λ¦…λ‹λ‹¤.

1.  **vtable (κ°€μƒ ν•¨μ ν…μ΄λΈ”):** `virtual` ν•¨μλ¥Ό κ°€μ§„ ν΄λμ¤λ”, μ–΄λ–¤ ν•¨μκ°€ μ–΄λ λ©”λ¨λ¦¬ μ£Όμ†μ— μλ”μ§€ κΈ°λ΅λ **'κ°€μƒ ν•¨μ μ£Όμ†λ΅'**μ„ κ°–μµλ‹λ‹¤.
2.  **vptr (κ°€μƒ ν¬μΈν„°):** ν•΄λ‹Ή ν΄λμ¤μ λ¨λ“  κ°μ²΄λ”, μμ‹  ν΄λμ¤μ `vtable`μ„ κ°€λ¦¬ν‚¤λ” **μ¨κ²¨μ§„ ν¬μΈν„°(`vptr`)**λ¥Ό λ‚΄λ¶€μ— κ°–κ² λ©λ‹λ‹¤.
3.  **νΈμ¶ κ³Όμ •:** `κ°μ²΄ ν¬μΈν„°` β†’ `vptr` β†’ `vtable` β†’ `μ‹¤μ  ν•¨μ μ£Όμ†` μμ„λ΅ μ°Ύμ•„κ°€μ„ μµμΆ… ν•¨μλ¥Ό νΈμ¶ν•©λ‹λ‹¤.

## 4. μ¶”μƒ ν΄λμ¤: "μΈν„°νμ΄μ¤"μ κ°•μ 

-   **μμ κ°€μƒ ν•¨μ (Pure Virtual Function):** `virtual void func() = 0;` μ²λΌ, κµ¬ν„λ¶€κ°€ μ—†λ” ν•¨μμ…λ‹λ‹¤. "κµ¬ν„μ€ μμ‹λ“¤μ΄ μ•μ•„μ„ ν•΄λΌ"λ” μλ―Έμ…λ‹λ‹¤.
-   **μ¶”μƒ ν΄λμ¤ (Abstract Class):** μμ κ°€μƒ ν•¨μλ¥Ό ν•λ‚ μ΄μƒ κ°€μ§„ ν΄λμ¤μ…λ‹λ‹¤.

#### μ¶”μƒ ν΄λμ¤μ ν•µμ‹¬ κ·μΉ™

-   π« **κ·μΉ™ 1:** μ¶”μƒ ν΄λμ¤λ” **κ°μ²΄λ¥Ό μ§μ ‘ μƒμ„±ν•  μ μ—†μµλ‹λ‹¤.** (`Shape s;` -> μ—λ¬)
-   β… **κ·μΉ™ 2:** μμ‹ ν΄λμ¤λ” λ¶€λ¨μ **λ¨λ“  μμ κ°€μƒ ν•¨μλ¥Ό λ°λ“μ‹ κµ¬ν„(μ¤λ²„λΌμ΄λ”©)**ν•΄μ•Όλ§ κ°μ²΄λ¥Ό μƒμ„±ν•  μ μμµλ‹λ‹¤.

β΅οΈ **κ²°λ΅ :** μ¶”μƒ ν΄λμ¤λ” μμ‹λ“¤μ—κ² "μ΄ κΈ°λ¥λ“¤μ€ λ°λ“μ‹ λ§λ“¤μ–΄μ•Ό ν•΄!"λΌκ³  κ°•μ ν•λ” **μΈν„°νμ΄μ¤(κ³„μ•½μ„)** μ—­ν• μ„ ν•©λ‹λ‹¤.